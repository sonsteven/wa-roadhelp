{
  "$schema": "https://vega.github.io/schema/vega/v6.json",
  "description": "Horizontal Bar Graph",
  "width": 400,
  "height": 200,
  "padding": 5,

  "data": [
    {
      "name": "table",
      "values": []
    }
  ],

  "signals": [
    {
      "name": "tooltip",
      "value": {},
      "on": [
        {"events": "rect:pointerover", "update": "datum"},
        {"events": "rect:pointerout",  "update": "{}"}
      ]
    }
  ],

"scales": [
  {
    "name": "xscale",
    "domain": {"data": "table", "field": "amount"},
    "nice": true,
    "range": "width"
  },
  {
    "name": "yscale",
    "type": "band",
    "domain": {"data": "table", "field": "category"},
    "range": "height",
    "padding": 0.1
  }
],

"axes": [
  { "orient": "bottom", "scale": "xscale" },
  { "orient": "left", "scale": "yscale", "labelLimit": 220 }
],

"marks": [
  {
    "type": "rect",
    "from": {"data":"table"},
    "encode": {
      "enter": {
        "y": {"scale": "yscale", "field": "category"},
        "height": {"scale": "yscale", "band": 1},
        "x": {"scale": "xscale", "field": "amount"},
        "x2": {"scale": "xscale", "value": 0}
      },
      "update": { "fill": {"value": "steelblue"} },
      "hover": { "fill": {"value": "red"} }
    }
  },
  {
    "type": "text",
    "encode": {
      "enter": {
        "baseline": {"value": "middle"},
        "fill": {"value": "#333"}
      },
      "update": {
        "x": {"scale": "xscale", "signal": "tooltip.amount", "offset": 4},
        "y": {"scale": "yscale", "signal": "tooltip.category", "band": 0.5},
        "text": {"signal": "tooltip.amount"},
        "fillOpacity": [
          {"test": "datum === tooltip", "value": 0},
          {"value": 1}
        ]
      }
    }
  }
]
}
